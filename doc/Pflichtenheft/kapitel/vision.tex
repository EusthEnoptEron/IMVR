\chapter{Vision ``IMVR''}

Die Vision soll dazu dienen, einen Überblick über die Applikation zu geben, die im Rahmen der Bachelorarbeit erstellt wird.

\section{Problemstellung}

Es soll eine Applikation namens ``\gls{imvr}'' entwickelt werden, welche Gebrauch von der Oculus Rift macht, um die Bilder- und Musiksammlung des Anwenders ansprechend darzustellen, z.B. in Form eines 3D-Karussels. Die zusätzliche "Tiefe", die durch den Einsatz eines stereoskopischen \gls{hmd} entsteht, soll dem Anwender helfen, sich in seiner Medienbibliothek schneller zurechtzufinden.

Zusätzlich dazu soll die Leap Motion dazu verwendet werden, um vollständige Handfreiheit zu gewähren: Der Anwender soll komplett ohne Maus und Tastatur imstande sein, sich durch seine Bilder zu navigieren.

Kurz zusammengefasst muss die Applikation:

\begin{itemize}
	\item Die Bild- und Musikbibliothek des Benutzers in stereoskopischem 3D darstellen.
	\item Diese freihändig durchsuchbar machen mit Sortier- und evtl. Gruppierfunktion.
	\item Die Bilder betrachtbar und die Musik abspielbar machen.
	\item Metainformationen darstellen (z.B. in Form von Diagrammen).
\end{itemize}

Zusätzlich zur Applikation selbst soll noch ein zusätzliches Tool entwickelt werden, welches im Voraus die Dateien auf dem Host-System indexiert und für die visuelle Applikation bereitstellt.

\section{Technologien}

Das Projekt verwendet spezielle Hardware und Software. Es folgt eine kurze Erklärung zu diesen Technologien.

\subsection{Oculus Rift}

Die Oculus Rift ist ein stereoskopisches \gls{hmd}, welches durch Oculus VR entwickelt wird. Die aktuelle Version ist das Developer Kit 2 (DK2). Ein Termin für die finale Version steht noch nicht fest.

Hardwaremässig besteht die Rift aus einem Headset für das Bild und einer Kamera für das Head-Tracking. Das Headset wird per USB und HDMI an den Computer angeschlossen und über ein Stromkabel mit Strom versorgt. Die Kamera wird auf dem Computerbildschirm platziert, und per USB an den Computer und per Sync-Kabel an die Rift angeschlossen.

\begin{figure}[h]
\centering
\includegraphics[width=0.7\linewidth]{bilder/rift1}
\caption{Illustration, welche die Anwendung und das Koordinatensystem der Oculus Rift verdeutlicht.}
\floatfoot{Quelle: \url{https://www.oculus.com/blog/building-a-sensor-for-low-latency-vr/}}
\label{fig:rift1}
\end{figure}

Seit DK2 ist das Headset mit 40 Infrarot-LEDs bestückt, welche mit einer bestimmten Frequenz aufleuchten und von der Kamera für das Head-Tracking benutzt werden.
 
Auf der Software-Seite wird ein Treiber auf dem Computer installiert, der nach einer Registration als Entwickler auf der offiziellen Seite erhältlich ist . Die Software erlaubt die Erstellung von Benutzerprofilen, um die \gls{ipd} korrekt einzustellen. Es ist ausserdem möglich, zwischen zwei Betriebsmodi auszuwählen: dem traditionellen Modus, wo die Rift als zweiter Bildschirm angesprochen wird, und dem neuen ``Direct Mode'', wo die Rift direkt angesprochen wird.

\subsection{Leap Motion}

Die \gls{leap} besteht aus einem rechteckigen Gerät mit zwei Infrarotsensoren, welche deren Daten per USB auf den angeschlossenen Computer überträgt. Nach der Installation der Leap Motion Runtime läuft auf dem Computer ein Service, der diese Daten empfängt, verarbeitet und per API mit einer variablen Framerate verschiedenen Applikationen zur Verfügung stellt.

Die Daten, welche diese API liefert, sind in sogenannte ``Frames'' gruppiert. Ein Frame ist sozusagen eine Momentaufnahme der Realität, welche sich aus erkannten Händen zusammensetzt. Durchschnittlich werden pro Sekunde etwa um die 100 dieser Frames berechnet.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.7\linewidth]{bilder/leap1}
	\caption{Verdeutlichung des Koordinatensystems.}
	\floatfoot{Quelle: \url{https://developer.leapmotion.com/documentation/csharp/devguide/Leap_Coordinate_Mapping.html}}
	\label{fig:leap1}
\end{figure}

Durch diese Frames kann man auf die Daten der Hände zugreifen. Jede Hand erhält eine ID, womit man gleiche Hände Frame-übergreifend identifizieren kann, sowie die dazugehörenden Koordinaten und Drehungen. Auf Abbildung \ref{fig:leap1} wird ersichtlich, dass sich die Koordinaten in einem rechtshändigen Koordinatensystem befinden, wobei die Y-Achse nach oben zeigt und die Masse in Millimeter angegeben sind. Die Koordinaten der Finger sind innerhalb von Finger-Instanzen gruppiert, welche wiederum ihre Gelenke als Instanzen einer Joint-Klasse zur Verfügung stellen.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.7\linewidth]{bilder/leap2}
	\caption{Das Sichtfeld der Leap Motion.}
	\floatfoot{Quelle: \url{https://community.leapmotion.com/t/accurately-measuring-distances/842/3 }}
	\label{fig:leap2}
\end{figure}

Die Leap Motion hat ungefähr eine Reichweite von einem Meter, wobei das Interaktionsfeld einer Form, wie in Abbildung \ref{fig:leap2} ersichtlich ist, entspricht. Das Sichtfeld liegt bei 150° in vertikaler und 120° in horizontaler Richtung.


\subsection{Unity 5}

\gls{unity} ist eine Entwicklungsumgebung und eine Spiel-Engine, die momentan aufgrund ihrer Bedienungsfreundlichkeit und einer frei erhältlichen Version sehr beliebt in der Szene der Indie-Developer ist. Gleichzeitig dient sie auch als gutes Prototyping-Tool, um schnell Ideen umzusetzen.

Am 3. März 2015 machte Unity einen Versionssprung und ist nun unter dem Namen ``Unity 5'' erhältlich. Neben anderen Neuerungen sind jetzt alle Funktionen, für die früher eine kostenpflichtige Lizenz erworben werden musste, auch in der freien Version erhältlich, was für dieses Projekt einen grösseren Spielraum bedeutet.

In diesem Projekt wurde Unity wegen der angenehmen Lernkurve und der guten Integrierung mit der Oculus Rift und der Leap Motion für den Einsatz gewählt. Wie bereits erwähnt wurde, ist es leicht, schnell zu Ergebnissen zu kommen, und die Entwicklungsumgebung unterstützt die zwei Programmiersprachen, die der Verfasser dieses Dokuments am besten beherrscht.

\section{Anwendung}

Innerhalb von \gls{imvr} wird die Leap Motion mit einer Halterung an der Oculus Rift befestigt, welche auf der offiziellen Website von Leap Motion für rund \$15\footnote{Siehe \url{https://www.leapmotion.com/product/vr}} erhältlich ist. Wie in Abbildung \ref{fig:uebersicht} ersichtlich ist, sind beide Geräte unter Anderem per USB am PC befestigt und senden darüber ihre Daten an die entsprechenden Services. Diese leiten wiederum die ausgewerteten Daten durch öffentliche APIs an Unity bzw. IMVR weiter.

\afterpage {
\begin{figure}[t!]
	\centering
	\includegraphics[width=0.8\linewidth]{bilder/systemuebersicht}
	\caption{Eine Übersicht der Technologien und wie sie verbunden sind.}
	\label{fig:uebersicht}
\end{figure}

\begin{table}[H]
	\centering
	\begin{tabular}{p{0.1\linewidth} p{0.3\linewidth} p{0.5\linewidth}}
		\textbf{Nr.} & \textbf{Komponente} & \textbf{Beschreibung} \\ \midrule
		1. & Oculus Rift DK2 & \gls{hmd} für den grafischen Output. \\
		2. & Leap Motion & Gerät, welches Hände erkennt und ihre Koordinaten an den Computer sendet. \\
		3. & Oculus Rift Kamera & Kamera, welche seit dem DK2 für das örtliche Tracking zuständig ist. \\
		4. & Computer & Host-System für IMVR. \\
		5. & Benutzer & Benutzer, der die Oculus Rift trägt und mit seinen Händen das Programm steuert. \\
	\end{tabular}
\end{table}
}

\clearpage